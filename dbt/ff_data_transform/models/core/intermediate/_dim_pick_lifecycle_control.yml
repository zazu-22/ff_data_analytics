version: 2

models:
  - name: dim_pick_lifecycle_control
    description: |
      Pick Lifecycle Control - Manages TBD â†’ Actual Pick Transitions.

      Grain: One row per pick with lifecycle tracking (primarily TBD picks)
      Source: int_pick_tbd + int_pick_draft_actual

      Tracks lifecycle states of draft picks, especially TBD picks that transition
      to actual picks when draft order is finalized.

      Current State (v2 Phase 4):
      - No actual draft transaction data yet
      - All TBD picks remain in ACTIVE_TBD state
      - Infrastructure ready for future actual draft data

      Future State (when actual draft data available):
      - TBD picks transition to SUPERSEDED when draft completes
      - superseded_by_pick_id points to actual pick that replaced TBD
      - Transactions can migrate from TBD to actual picks automatically

      Lifecycle States:
      - ACTIVE_TBD: TBD pick currently in use (draft order not finalized)
      - SUPERSEDED: TBD pick replaced by actual pick (soft-delete)
      - ACTUAL: Pick from actual draft data (future state)

    columns:
      - name: pick_id
        description: "Pick identifier (includes both TBD and actual picks)"
        data_tests:
          - unique
          - not_null

      - name: lifecycle_state
        description: "Current lifecycle state (ACTIVE_TBD, SUPERSEDED, ACTUAL)"
        data_tests:
          - not_null

      - name: superseded_by_pick_id
        description: "Pick ID that replaced this TBD pick (null if still active)"

      - name: superseded_at
        description: "Timestamp when TBD pick was replaced by actual pick"

      - name: season
        description: "Draft year"

      - name: round
        description: "Draft round number"

      - name: created_at
        description: "Timestamp when this lifecycle record was created"

      - name: migration_note
        description: "Explanation of lifecycle migration or state change"

      - name: control_version
        description: "Version number for lifecycle control records"

      - name: last_updated
        description: "Timestamp when this record was last updated"
