version: 2

sources:
  - name: nflverse
    description: "Raw nflverse snapshots loaded via shim; local dev reads Parquet under data/raw."
    schema: raw
    tables:
      - name: players
        description: "Canonical player reference including cross-IDs."
      - name: weekly
        description: "Weekly player stats at week grain."
      - name: season
        description: "Season-level player stats."
      - name: injuries
        description: "Weekly injury reports."
      - name: depth_charts
        description: "Team depth charts."
      - name: schedule
        description: "NFL schedules and results."
      - name: teams
        description: "Team reference data."
      - name: snap_counts
        description: "Snap participation by phase (offense, defense, ST)."
      - name: ff_opportunity
        description: "Expected stats, variances, team shares (170+ columns)."
      - name: ff_playerids
        description: |
          Player ID crosswalk dataset with 20+ provider ID mappings.

          Grain: One row per player/team placeholder (12,133 rows total)
          Contains mappings for: mfl_id, gsis_id, sleeper_id, espn_id, yahoo_id, pfr_id,
          fantasypros_id, pff_id, cbs_id, ktc_id, sportradar_id, fleaflicker_id, rotowire_id,
          rotoworld_id, stats_id, stats_global_id, fantasy_data_id, swish_id, cfbref_id, nfl_id

          Used by: stg_nflverse__ff_playerids (replaces dim_player_id_xref seed)
        external_location: "data/raw/nflverse/ff_playerids/dt=*/ff_playerids_*.parquet"
        columns:
          - name: mfl_id
            description: MyFantasyLeague player ID
          - name: gsis_id
            description: NFL GSIS ID
          - name: sleeper_id
            description: Sleeper platform player ID
          - name: espn_id
            description: ESPN player ID
          - name: yahoo_id
            description: Yahoo Fantasy player ID
          - name: pfr_id
            description: Pro Football Reference player ID
          - name: name
            description: Player name in "First Last" format
          - name: merge_name
            description: Normalized name for fuzzy matching
          - name: position
            description: Player position
          - name: team
            description: Current NFL team
          - name: birthdate
            description: Player birthdate (for duplicate resolution)
          - name: draft_year
            description: NFL draft year (for duplicate resolution)
